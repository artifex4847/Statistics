ods html; 
ods listing close; 
ods graphics on; 

Data aa;
 e1=0; e2=0; e3=0;e4=0;e5=0;e6=0;
 e7=0;e8=0;e9=0; e10=0;e11=0;e12=0;	
do t=1 to 300;
   e=rannor(2345);
    if t=1 then do; 
     y=e-0.8*e1;
     end;
	 else if t=2 then do; 	  
          y=0.4*y+e-0.8*e2;
          e1=e;
	     end;
         else if t=3 then do; 
          y=0.4*y+e-0.8*e3;
          e2=e1;
          e1=e;
	     end;
		 else if t=4 then do;
		  y=0.4*y+e-e4;
          e3=e2;
          e2=e1;
          e1=e;	
         end;
		 else if t=5 then do;
          y=0.4*y+e-0.8*e5;
		  e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
          else if t=6 then do;
          y=0.4*y+e-0.8*e6;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
           else if t=7 then do;
          y=0.4*y+e-0.8*e7;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
		 else if t=8 then do;
          y=0.4*y+e-0.8*e8;
		  e7=e6;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
		 else if t=9 then do;
          y=0.4*y+e-0.8*e9;
		  e8=e7;
		  e7=e6;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
         else if t=10 then do;
          y=0.4*y+e-0.8*e10;
		  e9=e8;
		  e8=e7;
		  e7=e6;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
         else if t=11 then do;
          y=0.4*y+e-0.8*e11;
		  e10=e9;
		  e9=e8;
		  e8=e7;
		  e7=e6;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
          else if t=12 then do;
          y=0.4*y+e-0.8*e12;
          e11=e10;
          e10=e9;
		  e9=e8;
		  e8=e7;
		  e7=e6;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
         else do; 
          y=0.4*y+e-0.8*e12;
		  e12=e11;
		  e11=e10;
		  e10=e9;
		  e9=e8;
		  e8=e7;
		  e7=e6;
          e6=e5;
          e5=e4;
          e4=e3;
          e3=e2;
          e2=e1;
          e1=e;
	     end;
		 if t>100 then output;
   end;
run;

Proc gplot data=aa; 
      symbol i=spline v=circle h=1.5; 
      plot y * t;
      title 'Plot of a simulated AR(1)MA(1)_12 with (0.4,0.8) ';
   run;

Proc arima data=aa;
   identify var=y center;
 run;
   estimate p=1 q=(12) noconstant method=ml;
run;


proc autoreg data=aa;
 model y=/nlag=25 noint backstep method=ml;
 output out=resdat10 r=resid2 ucl=ucl lcl=lcl p=forecast pm=ytrend;
 title 'Autoregression procedure';
run;

ods graphics off;
ods html close;
ods listing;
