ods html; 
ods listing close; 
ods graphics on; 

Data a;
 y1=0; y2=0; y3=0;y4=0;y5=0;y6=0;
 y7=0;y8=0;y9=0; y10=0;y11=0;y12=0;
do t=1 to 500;
   e=rannor(2345);
   if t=1 then do; 
     y=0.8*y1+e;
     end;
	 else if t=2 then do; 
	      y1=y;
          y=0.8*y2+e;
	     end;
         else if t=3 then do; 
          y2=y1;
          y1=y;
          y=0.8*y3+e;
	     end;
		 else if t=4 then do;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y4+e;
	     end;
		 else if t=5 then do;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y5+e;
	     end;
          else if t=6 then do;
		  y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y6+e;
	     end;
           else if t=7 then do;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y7+e;
	     end;
		 else if t=8 then do;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y8+e;
	     end;
		 else if t=9 then do;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y9+e;
	     end;
         else if t=10 then do;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y10+e;
	     end;
         else if t=11 then do;
		 y10=y9;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y11+e;
	     end;
         else if t=12 then do;
		 y11=y10;
		 y10=y9;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y12+e;
	     end;
         else do;
		 y12=y11;
		 y11=y10;
		 y10=y9;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=0.8*y12+e;
	     end;
		 if t>300 then output;
   end; 
    keep t e y;
run;

Proc gplot data=a; 
      symbol i=spline v=circle h=1.5; 
      plot y * t;
      title 'Plot of a simulated AR(1)_12 with 0.8';
   run;

Proc arima data=a;
   identify var=y center;
 run;
   estimate p=(12) noconstant method=ml;
run;


proc autoreg data=a;
 model y=/nlag=25 noint backstep method=ml;
 output out=resdat10 r=resid2 ucl=ucl lcl=lcl p=forecast pm=ytrend;
 title 'Autoregression procedure';
run;

ods graphics off;
ods html close;
ods listing;
