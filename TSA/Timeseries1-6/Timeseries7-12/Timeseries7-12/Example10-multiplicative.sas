ods html; 
ods listing close; 
ods graphics on; 

Data aa;
 y1=0; y2=0; y3=0;y4=0;y5=0;y6=0;
 y7=0;y8=0;y9=0; y10=0;y11=0;y12=0;	
 do t=1 to 300;
   e=rannor(2345);
   e1=lag(e);
   if t=1 then do;
     e1=0; 
     y=-0.7*y1+e-0.8*e1;
     end;
	 else if t=2 then do; 
	      y1=y;
          y=-0.7*y2+e-0.8*e1;
	     end;
         else if t=3 then do; 
          y2=y1;
          y1=y;
          y=-0.7*y3+e-0.8*e1;
	     end;
		 else if t=4 then do;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y4+e-0.8*e1;
	     end;
		 else if t=5 then do;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;	
          y=-0.7*y5+e-0.8*e1;
	     end;
          else if t=6 then do;
		  y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y6+e-0.8*e1;
	     end;
           else if t=7 then do;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;	
          y=-0.7*y7+e-0.8*e1;
	     end;
		 else if t=8 then do;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y8+e-0.8*e1;
	     end;
		 else if t=9 then do;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;	
          y=-0.7*y9+e-0.8*e1;
	     end;
         else if t=10 then do;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y10+e-0.8*e1;
	     end;
         else if t=11 then do;
		 y10=y9;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y11+e-0.8*e1;
	     end;
         else if t=12 then do;
		 y11=y10;
		 y10=y9;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y12+e-0.8*e1;
	     end;
         else do;
		 y12=y11;
		 y11=y10;
		 y10=y9;
		 y9=y8;
		 y8=y7;
		 y7=y6;
          y6=y5;
          y5=y4;
          y4=y3;
          y3=y2;
          y2=y1;
          y1=y;
          y=-0.7*y12+e-0.8*e1;
	     end;
		 if t>100 then output;
   end; 
    keep t e y12 y;
run;
proc print data=aa;
run;


Proc gplot data=aa; 
      symbol i=spline v=circle h=1.5; 
      plot y * t;
      title 'Plot of a simulated MA(1)AR(1)_12 with (-0.7,0.8) ';
   run;

Proc arima data=aa;
   identify var=y nlag=50 center minic;
 run;
   estimate p=(12) q=1 noconstant method=ml;
run;

proc autoreg data=aa;
 model y=/nlag=50 noint dwprob dw=8 backstep method=ml;
 output out=resdat10 r=resid2 ucl=ucl lcl=lcl p=forecast pm=ytrend;
 title 'Autoregression procedure';
run;

ods graphics off;
ods html close;
ods listing;
